(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a361dae6"],{"4de4":function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").filter,a=n("1dde"),s=n("ae40"),o=a("filter"),d=s("filter");i({target:"Array",proto:!0,forced:!o||!d},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"5b83":function(e,t,n){"use strict";var i=n("5f25"),r=n.n(i);r.a},"5f25":function(e,t,n){},"99af":function(e,t,n){"use strict";var i=n("23e7"),r=n("d039"),a=n("e8b5"),s=n("861d"),o=n("7b0b"),d=n("50c4"),l=n("8418"),c=n("65f0"),u=n("1dde"),f=n("b622"),p=n("2d00"),h=f("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",b=p>=51||!r((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),y=u("concat"),g=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:a(e)},x=!b||!y;i({target:"Array",proto:!0,forced:x},{concat:function(e){var t,n,i,r,a,s=o(this),u=c(s,0),f=0;for(t=-1,i=arguments.length;t<i;t++)if(a=-1===t?s:arguments[t],g(a)){if(r=d(a.length),f+r>v)throw TypeError(m);for(n=0;n<r;n++,f++)n in a&&l(u,f,a[n])}else{if(f>=v)throw TypeError(m);l(u,f++,a)}return u.length=f,u}})},c975:function(e,t,n){"use strict";var i=n("23e7"),r=n("4d64").indexOf,a=n("a640"),s=n("ae40"),o=[].indexOf,d=!!o&&1/[1].indexOf(1,-0)<0,l=a("indexOf"),c=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:d||!l||!c},{indexOf:function(e){return d?o.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},da845:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-divider"),n("div",{staticStyle:{width:"600px"}},[n("el-input",{attrs:{placeholder:"请输入学校部门名称进行搜索","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),n("el-tree",{ref:"tree",staticStyle:{"margin-top":"10px"},attrs:{data:e.deps,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return n("span",{staticClass:"custom-tree-node",staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[n("span",[e._v(e._s(i.label))]),n("span",[n("el-button",{staticClass:"depBtn",attrs:{type:"primary",size:"mini"},on:{click:function(){return e.showAddDepView(r)}}},[e._v(" 添加部门 ")]),n("el-button",{staticClass:"depBtn",attrs:{size:"mini",type:"danger"},on:{click:function(){return e.deleteDep(r)}}},[e._v(" 删除部门 ")])],1)])}}])}),n("el-dialog",{attrs:{title:"添加部门",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("table",[n("tr",[n("td",[n("el-tag",[e._v("上级部门")])],1),n("td",[e._v(e._s(e.pname)+" ")])]),n("tr",[n("td",[n("el-tag",[e._v("部门名称")])],1),n("td",[n("el-input",{attrs:{placeholder:"请输入部门名称..."},model:{value:e.dep.name,callback:function(t){e.$set(e.dep,"name",t)},expression:"dep.name"}})],1)])])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.doAddDep}},[e._v("确 定")])],1)])],1)],1)},r=[],a=(n("99af"),n("4de4"),n("c975"),n("a434"),n("b0c0"),{name:"SysDep",data:function(){return{dialogVisible:!1,filterText:"",deps:[],dep:{name:"",parentId:-1},pname:"",defaultProps:{children:"children",label:"name"}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.initDeps()},methods:{initDep:function(){this.dep={name:"",parentId:-1},this.pname=""},initDeps:function(){var e=this;this.getRequest("/baseinfo/department/").then((function(t){t&&(e.deps=t)}))},addDep2Deps:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id=t.parentId)return i.children=i.children.concat(t),void(i.children.length>0&&(i.parent=!0));this.addDep2Deps(i.children,t)}},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},showAddDepView:function(e){console.log(e),this.pname=e.name,this.dep.parentId=e.id,this.dialogVisible=!0},doAddDep:function(){var e=this;this.postRequest("/baseinfo/department/",this.dep).then((function(t){t&&(e.addDep2Deps(e.deps,t.obj),e.dialogVisible=!1,e.initDep())}))},deleteDep:function(e){var t=this;console.log(e),e.parent?this.$message.error("父部门删除失败"):this.$confirm("此操作将永久删除【"+e.name+"】部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/baseinfo/department/"+e.id).then((function(n){n&&t.removeDepFromDeps(null,t.deps,e.id)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},removeDepFromDeps:function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];if(r.id==n)return t.splice(i,1),void(0==t.length&&(e.parent=!1));this.removeDepFromDeps(r,r.children,n)}}}}),s=a,o=(n("5b83"),n("2877")),d=Object(o["a"])(s,i,r,!1,null,null,null);t["default"]=d.exports},f820:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("This is an about page")])])}],a=n("2877"),s={},o=Object(a["a"])(s,i,r,!1,null,null,null);t["default"]=o.exports},feca:function(e,t,n){var i={"./About.vue":"f820","./Home.vue":"bb51","./Login.vue":"a55b","./bas/BasDep.vue":"da845","./sys/SysAuth.vue":"e3ca","./sys/SysBasic.vue":"8d67","./sys/SysCfg.vue":"1fe7","./sys/SysData.vue":"d1e3","./sys/SysHr.vue":"418a","./sys/SysInit.vue":"8608","./sys/SysLog.vue":"864e","./sys/SysUserMan.vue":"bae0"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="feca"}}]);
//# sourceMappingURL=chunk-a361dae6.768654ce.js.map